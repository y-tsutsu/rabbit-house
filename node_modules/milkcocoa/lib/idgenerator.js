function n2s(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=e%62,r=Math.floor(e/62);return 1>r?"":n2s(r)+t[n]}function IdGenerator(){var e="ybfghijam6cpqdrw71nx34eo5suz0t9vkl28",t=(new Date).getTime(),n=t,r=null,o=[],i=0,a=1,u=i,s="0000";return{init:function(e){if(e&&"number"==typeof e){t=(new Date).getTime(),n=Math.floor(e/1e3);var r=n2s(n);s=r.substr(r.length-4)}},getHeader:function(e,n){var o=this,i=(new Date).getTime();if(r==i)setTimeout(function(){o.getHeader(e,n)},1);else{r=i;var a=i-t;n((e+a).toString(36))}},getNextId:function(e){o.push(e),u==i&&this._exec_getNextId()},_exec_getNextId:function(){var e=this,t=o.shift();t?(u=a,this._getNextId(function(n,r){t(n,r),e._exec_getNextId()})):u=i},_getNextId:function(t){function r(t){return 1>=t?e[Math.floor(36*Math.random())]:e[Math.floor(36*Math.random())]+r(t-1)}this.getHeader(n,function(e){var n=e+s+r(3);15!=n.length&&(global.console&&console.error("generated id is wrong.",n.length),n=n.substr(0,15)),t(null,n)})}}}module.exports=IdGenerator;